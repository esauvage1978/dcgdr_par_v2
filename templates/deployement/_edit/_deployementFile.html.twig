<article id="file" class="bg-white">
    <h5 class="text-purple p-1 pt-3 text-center ">
        documents joints
    </h5>
    <div class="card-body">


        <input type="hidden" id="filecount" value="{{ deployement.deployementFiles | length }}"/>
        <input type="hidden" id="linkcount" value="{{ deployement.deployementLinks | length }}"/>

        <table id="file-media" class="table table-striped table-condensed "
               style="width:100%">
            {% for deployementFile in deployement.deployementFiles %}
                <tr id="media-{{ deployementFile.fileName }}">
                    <td>
                        <a type="button" class="text-primary" target="_blank"  href="{{ absolute_url( asset(deployementFile.href)) }}">
                            {{ include('file/_icone_extension.html.twig',{'extension': deployementFile.fileExtension}) }}
                        </a>
                    </td>
                    <td>
                        <a type="button" class="text-primary" target="_blank"  href="{{ absolute_url( asset(deployementFile.href)) }}">
                            {{ deployementFile.title }}
                        </a>
                    </td>
                    <td class="float-right" style="width: 100px">
                        <button class="media-delete btn btn-danger btn-sm "
                                data-msg="deployementFile_{{ loop.index0 }}"
                                data-media="{{ deployementFile.fileName }}">
                            <i class="fas fa-trash"></i>
                        </button>
                        <span class="media-edit btn btn-info  btn-sm"
                              onclick="showOtherFile({{ loop.index0 }})">
                            <i class="fas fa-edit"></i>
                        </span>
                    </td>
                </tr>
                <tr id="deployementFile_{{ loop.index0 }}" class="d-none">
                    <td colspan="3">
                        {{ form_widget(form.deployementFiles[loop.index0]) }}
                    </td>
                </tr>
            {% endfor %}
            {% for deployementLink in deployement.deployementLinks %}
                <tr id="media-{{ deployementLink.id }}">
                    <td>
                        <a type="button" class="text-primary" target="_blank" href="{{ deployementLink.link }}">
                            <i class="fas fa-globe"></i>
                        </a>
                    </td>
                    <td>
                        <a type="button" class="text-primary" target="_blank"  href="{{ deployementLink.link }}">
                            {{ deployementLink.title }}
                        </a>
                    </td>
                    <td class="float-right" style="width: 100px">
                        <button class="media-delete btn btn-danger btn-sm "
                                data-msg="deployementLink_{{ loop.index0 }}"
                                data-media="{{ deployementLink.id }}">
                            <i class="fas fa-trash"></i>
                        </button>
                        <span class="media-edit btn btn-info  btn-sm"
                              onclick="showOtherLink({{ loop.index0 }})">
                            <i class="fas fa-edit"></i>
                        </span>
                    </td>
                </tr>
                <tr id="deployementLink_{{ loop.index0 }}" class="d-none">
                    <td colspan="3">
                        {{ form_widget(form.deployementLinks[loop.index0]) }}
                    </td>
                </tr>
            {% endfor %}
        </table>

        <div id="media-new">
            <div class="row">
                <div class="col-12 media-add" id="media-add-file"
                     data-prototype="{{ form_row(form.deployementFiles.vars.prototype) | e('html_attr') }}">
                </div>
                <div class="col-12 media-add" id="media-add-link"
                     data-prototype="{{ form_row(form.deployementLinks.vars.prototype) | e('html_attr') }}">
                </div>
            </div>
        </div>
        <div class="row justify-content-around">
            <a href="#file" id="add-file" class="btn btn-success mt-1">
                <i class="fas fa-plus"></i> ajouter un fichier
            </a>
            <a href="#link" id="add-link" class="btn btn-success mt-1">
                <i class="fas fa-plus"></i> ajouter un lien
            </a>
        </div>

    </div>
</article>