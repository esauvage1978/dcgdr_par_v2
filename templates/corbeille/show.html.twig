{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} Corbeille{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/datatables-bs4/css/dataTables.bootstrap4.css')) }}">
{% endblock %}

{% block body_header %}
    {{ include('admin/_body_header.html.twig', {'domaine': 'Corbeille' , 'id' : corbeille.id, 'index' : 'corbeille_index'}) }}
{% endblock %}

    {% block body %}

        <div class="row justify-content-center">
            <div class="{{ col_primary }}">
                <div class="card ">
                    <div class="card-body">
                        <table class="table table-borderless">
                            <tbody>
                            <tr>
                                <th>Organisme</th>
                                <td colspan="2">
                                    <a href="{{ path('organisme_show', {'id': corbeille.organisme.id}) }}">
                                        {{ corbeille.organisme.name }}
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <th>Nom de la corbeille</th>
                                <td colspan="2">{{ corbeille.name }}</td>
                            </tr>
                            <tr>
                                <th>Afficher</th>
                                <td class="text-center">
                                    {% if corbeille.enable %}
                                        <span class="text-success"><i class="fas fa-eye"></i></span>
                                    {% else %}
                                        <span class="text-danger"><i class="fas fa-eye-slash"></i></span>
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <th>Défaut</th>
                                <td class="text-center">
                                    <span class="text-{{ corbeille.showDefault ? 'info' : 'light' }}"><i
                                                class="fas fa-circle"></i></span>
                                </td>
                                <td>
                                    <small class="text-muted">Associé automatiquement lors de la création d'un
                                        déploiement.</small>
                                </td>
                            </tr>
                            <tr>
                                <th>Consultation</th>
                                <td class="text-center">
                                    <span class="text-{{ corbeille.showRead ? 'info' : 'light' }}"><i
                                                class="fas fa-circle"></i></span>
                                </td>
                                <td>
                                    <small class="text-muted">Filtre activé pour les rédacteurs.</small>
                                </td>
                            </tr>
                            <tr>
                                <th>Pilotage</th>
                                <td class="text-center">
                                    <span class="text-{{ corbeille.showWrite ? 'info' : 'light' }}"><i
                                                class="fas fa-circle"></i></span>
                                </td>
                                <td>
                                    <small class="text-muted">Filtre activé pour les pilotes.</small>
                                </td>
                            </tr>
                            <tr>
                                <th>Validation</th>
                                <td class="text-center">
                                    <span class="text-{{ corbeille.showValidate ? 'info' : 'light' }}"><i
                                                class="fas fa-circle"></i></span>
                                </td>
                                <td>
                                    <small class="text-muted">Filtre activé pour les valideurs.</small>
                                </td>
                            </tr>
                            {% if corbeille.content %}
                                <tr>
                                    <th>Description</th>
                                    <td colspan="2">{{ corbeille.content | raw }}</td>
                                </tr>
                            {% endif %}
                            </tbody>
                        </table>
                    </div>
                    <div class="card-footer">
                        <div class="row">
                            <div class="col  d-flex justify-content-between align-items-center">

                                {{ include('share/__btn_return_list.html.twig',
                                    {   'url':'corbeille_index'
                                    }) }}

                                {% if is_granted('ROLE_GESTIONNAIRE') or (is_granted('ROLE_GESTIONNAIRE_LOCAL') and  corbeille.organisme in app.user.organismes) %}
                                    {{ include('share/__btn_edit.html.twig',
                                        {   'url':'corbeille_edit',
                                            'id':corbeille.id
                                        }) }}
                                {% endif %}
                                {{ include('share/_delete_form.html.twig',{'domaine': 'corbeille','id':corbeille.id}) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="{{ col_secondary }}">

                <div class="card">
                    <div class="card-footer">
                        Utilisateurs
                    </div>
                    <div class="card-body text-justify">
                        {% for user in corbeille.users %}
                            {{ include('user/_show_item.html.twig') }}
                        {% else %}
                            <div class="list-group-item">En attente d'ajout</div>
                        {% endfor %}
                    </div>
                </div>

            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-10">
                <div class="card card-primary">
                    <div class="card-header p-0 pt-1 ">
                        <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="custom-tabs-one-home-tab" data-toggle="pill"
                                   href="#custom-tabs-one-home" role="tab" aria-controls="custom-tabs-one-home"
                                   aria-selected="true">
                                    Pilotage d'actions <span
                                            class="badge badge-info">{{ corbeille.actionWriters.count }}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="custom-tabs-one-profile-tab" data-toggle="pill"
                                   href="#custom-tabs-one-profile" role="tab" aria-controls="custom-tabs-one-profile"
                                   aria-selected="false">
                                    Consultation d'actions <span
                                            class="badge badge-info">{{ corbeille.actionReaders.count }}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="custom-tabs-one-messages-tab" data-toggle="pill"
                                   href="#custom-tabs-one-messages" role="tab" aria-controls="custom-tabs-one-messages"
                                   aria-selected="false">Messages</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="custom-tabs-one-settings-tab" data-toggle="pill"
                                   href="#custom-tabs-one-settings" role="tab" aria-controls="custom-tabs-one-settings"
                                   aria-selected="false">Settings</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="custom-tabs-one-tabContent">
                            <div class="tab-pane fade active show" id="custom-tabs-one-home" role="tabpanel"
                                 aria-labelledby="custom-tabs-one-home-tab">
                                <div class="row">
                                    {% for action in corbeille.actionWriters %}
                                        <div class="col-4">
                                            {{ include('action/_view/_show_item.html.twig') }}
                                        </div>
                                    {% else %}
                                        <div class="list-group-item">En attente d'ajout</div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="tab-pane fade" id="custom-tabs-one-profile" role="tabpanel"
                                 aria-labelledby="custom-tabs-one-profile-tab">
                                <div class="row">
                                    {% for action in corbeille.actionReaders %}
                                        <div class="col-4">
                                            {{ include('action/_view/_show_item.html.twig') }}
                                        </div>
                                    {% else %}
                                        <div class="list-group-item">En attente d'ajout</div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="tab-pane fade" id="custom-tabs-one-messages" role="tabpanel"
                                 aria-labelledby="custom-tabs-one-messages-tab">
                                Morbi turpis dolor, vulputate vitae felis non, tincidunt congue mauris. Phasellus
                                volutpat
                                augue id mi placerat mollis. Vivamus faucibus eu massa eget condimentum. Fusce nec
                                hendrerit
                                sem, ac tristique nulla. Integer vestibulum orci odio. Cras nec augue ipsum. Suspendisse
                                ut
                                velit condimentum, mattis urna a, malesuada nunc. Curabitur eleifend facilisis velit
                                finibus
                                tristique. Nam vulputate, eros non luctus efficitur, ipsum odio volutpat massa, sit amet
                                sollicitudin est libero sed ipsum. Nulla lacinia, ex vitae gravida fermentum, lectus
                                ipsum
                                gravida arcu, id fermentum metus arcu vel metus. Curabitur eget sem eu risus tincidunt
                                eleifend ac ornare magna.
                            </div>
                            <div class="tab-pane fade" id="custom-tabs-one-settings" role="tabpanel"
                                 aria-labelledby="custom-tabs-one-settings-tab">
                                Pellentesque vestibulum commodo nibh nec blandit. Maecenas neque magna, iaculis tempus
                                turpis ac, ornare sodales tellus. Mauris eget blandit dolor. Quisque tincidunt venenatis
                                vulputate. Morbi euismod molestie tristique. Vestibulum consectetur dolor a vestibulum
                                pharetra. Donec interdum placerat urna nec pharetra. Etiam eget dapibus orci, eget
                                aliquet
                                urna. Nunc at consequat diam. Nunc et felis ut nisl commodo dignissim. In hac habitasse
                                platea dictumst. Praesent imperdiet accumsan ex sit amet facilisis.
                            </div>
                        </div>
                    </div>
                    <!-- /.card -->
                </div>
            </div>
        </div>

    {% endblock %}
