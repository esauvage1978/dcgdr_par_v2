{% extends 'base.html.twig' %}

{% block title %} {{ parent() }} Plan d'actions {% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/datatables-bs4/css/dataTables.bootstrap4.css')) }}">
    <link rel="stylesheet"
          href="{{ absolute_url( asset('plugins/datatables-responsive/css/responsive.bootstrap4.min.css')) }}">
{% endblock %}

{% block body_header %}
    <div class="col">
            <h1 class="m-0 text-dark">Recherche sur le site </h1>
    </div>
    <div class="col">
        <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="{{ path('home') }}">Home</a></li>
        </ol>
    </div>
{% endblock %}

{% block body %}

    {% if actions|length==0 and deployements | length ==0  %}

        <div class="row bg-white shadow ">
            <div class="col-sm-4 ">
                <img src="{{ absolute_url( asset('img/nothing.jpg')) }}"
                     style="min-width:100%;
                        min-height:100%;
                        width:auto;
                        height:auto;" alt="nothing" />
            </div>
            <div class="col-sm-8 pr-4 pt-5">
                <div class="row justify-content-center ">
                    <h1 class="font-weight-bold  bg-white rounded"><b>DCGDR</b> PAR </h1>
                </div>
                <div class="row justify-content-center ">

                    <span class="text-muted  bg-white rounded">Gestion des plans d'actions</span>
                </div>
                <br/>

                <div class="row justify-content-center">
                    <div class="col-6 m-5 bg-white rounded">
                        <h3><i class="fas fa-info-circle text-info"></i> Oops! rien trouvé pour cette recherche.</h3>

                        <p>
                            Rien dans les actions ou déploiements.
                            <br><br>
                            Cependant, vous pouvez <a href="{{ path('home') }}">retourner sur la page d'accueil</a> ou
                            relancer une recherche.
                        </p>
                        <form class="search-form" method="POST" action="{{ path('home_search') }}">
                            <div class="input-group ">
                                <input class="form-control " name="search" id="search" type="search"
                                       placeholder="Recherche" aria-label="Recherche">
                                <div class="input-group-append">
                                    <button class="btn btn-info" type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>

                    </div>

                </div>
            </div>
        </div>
    {% endif %}

    {%  if actions | length >0 || deployement | length >0 %}
        <div class="row">
        <div class="col-12">
            <div class="card card-primary">
                <div class="card-header p-0 pt-1">
                    <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                        {%  if actions | length >0 %} %}
                        <li class="nav-item">
                            <a class="nav-link active" id="custom-tabs-one-home-tab" data-toggle="pill" href="#custom-tabs-one-home" role="tab"
                               aria-controls="custom-tabs-one-home" aria-selected="true">
                                Actions
                                <span class="badge badge-info">{{ actions | length }}</span>
                            </a>
                        </li>
                        {% endif %}
                        {%  if deployements | length >0 %}
                        <li class="nav-item">
                            <a class="nav-link" id="custom-tabs-one-profile-tab" data-toggle="pill" href="#custom-tabs-one-profile" role="tab"
                               aria-controls="custom-tabs-one-profile" aria-selected="false">
                                Deploiements
                                <span class="badge badge-info">{{ deployements | length }}</span>
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content" id="custom-tabs-one-tabContent">
                        <div class="tab-pane fade active show" id="custom-tabs-one-home" role="tabpanel" aria-labelledby="custom-tabs-one-home-tab">
                            {%  if actions | length >0 %}
                            {{ include('action/_view/_index_table.html.twig') }}
                            {%  endif %}
                        </div>
                        <div class="tab-pane fade" id="custom-tabs-one-profile" role="tabpanel" aria-labelledby="custom-tabs-one-profile-tab">
                            {%  if deployements | length >0 %}
                            {{ include('deployement/_view/_index_table.html.twig') }}
                            {%  endif %}
                        </div>
                    </div>
                </div>
                <!-- /.card -->
            </div>
        </div>
    </div>
    {% endif %}
{% endblock %}


{% block javascripts %}
    <script src="{{ absolute_url( asset('plugins/datatables/jquery.dataTables.js')) }}"></script>
    <script src="{{ absolute_url( asset('plugins/datatables-bs4/js/dataTables.bootstrap4.js')) }}"></script>
    <script src="{{ absolute_url( asset('plugins/datatables-responsive/js/dataTables.responsive.min.js')) }}"></script>
    <script src="{{ absolute_url( asset('plugins/datatables-responsive/js/responsive.bootstrap4.min.js')) }}"></script>
    <script src="{{ absolute_url( asset('js/datatables/action.js')) }}"></script>
{% endblock %}