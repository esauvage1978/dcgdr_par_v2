{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} Catégorie{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/select2/css/select2.min.css')) }}">
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css')) }}">
    <link rel="stylesheet" href="{{ absolute_url( asset('plugins/icheck-bootstrap/icheck-bootstrap.min.css')) }}">
{% endblock %}

{% block body_header %}
    {{ include('admin/_body_header.html.twig', {'domaine': 'Catégorie' , 'id' : category.id, 'index' : 'category_index'}) }}
{% endblock %}


{% block body %}

    {{ form_start(form) }}
    <div class="row justify-content-center">
        <div class="{{col_primary}}">
            <div class="card ">

                {{ include('category/_form.html.twig') }}
                <div class="card-footer">
                    <div class="row">
                        <div class="col  d-flex justify-content-between align-items-center">
                            {{ include('share/__btn_return_list.html.twig',
                                {   'url':'category_index'
                                }) }}

                            {{ include('share/__btn_show.html.twig',
                                {   'url':'category_show',
                                    'id':category.id
                                }) }}

                            {{ include('share/__btn_save.html.twig') }}

                            <span class="btn btn-danger " onclick="$('#delete').click();">
                                 <i class="fas fa-trash"></i> Supprimer
                            </span>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="d-none">
        {{ form_rest(form)  }}
    </div>
    {{ form_end(form) }}


    <div class="d-none">
        {{ include('share/_delete_form.html.twig',{'domaine': 'category','id':category.id}) }}
    </div>
{% endblock %}


{% block javascripts %}
    <!-- Select2 -->
    <script src="{{ absolute_url( asset('plugins/select2/js/select2.full.min.js')) }}"></script>
    <script src="{{ absolute_url( asset('js/fillCombobox/fillCombobox.js')) }}"></script>
    <script type="text/javascript">
        $(function () {
            fillCombobox('#cmb_axe', "{{ path('ajax_fill_combobox_axes') }}", true, {{ category.thematique.pole.axe.id }});

            $('#cmb_axe').change(function () {
                fillComboboxChained('#cmb_axe', '#cmb_pole', "{{ path('ajax_fill_combobox_poles') }}", true, false, {{ category.thematique.pole.id }});
            });

            $('#cmb_pole').change(function () {
                fillComboboxChained('#cmb_pole', '#cmb_thematique', "{{ path('ajax_fill_combobox_thematiques') }}", true, true, {{ category.thematique.id }});
            });

            $('#cmb_thematique').change(function () {
                $('#category_thematique').val($('#cmb_thematique').val());
            });
        });
    </script>
{% endblock %}