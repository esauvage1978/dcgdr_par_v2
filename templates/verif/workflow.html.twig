{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} VÃ©rif action{% endblock %}

{% block stylesheets %}

{% endblock %}

{% block body_header %}
    <div class="col">
        <h1 class="m-0 text-dark">Action {{ action.category.thematique.ref }}-{{ action.category.ref }}
            -{{ action.ref }}</h1>
    </div>
    <div class="col">
        <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="{{ path('home') }}">Home</a></li>
            <li class="breadcrumb-item active">Action {{ action.id }}</li>
        </ol>
    </div>

{% endblock %}

{% block body %}
    <a href="{{ path('action_show',{'id':action.id}) }}" >
        {{ action.name }}
    </a>
    <br/>
    {{ action.state }}
    <br/>
    {{ action.contentState }}
    <br/>
    {{ action.stateAt | date("d/m/Y") }}
    <br/>
    Liste des transitions possibles :
    {% for transition in workflow_transitions(action) %}
        <a href="{{ path('workflow_action_check_apply_transition',{'id': action.id, 'transition':transition.name}) }}">
            {{ transition.name }}
        </a>
    {% else %}
        No actions available.
    {% endfor %}
    <hr>
    <table class="table table-striped table-bordered">
        <tr>
            <th>Num</th>
            <th>Qui</th>
            <th>FROM</th>
            <th>TO</th>
            <th>Le</th>
            <th>Commentaire</th>

        </tr>

        {% for actionState in action.actionStates %}
            <tr>
                <td>{{ actionState.id }}</td>
                <td>{{ actionState.user.name }}</td>
                <td>{{ actionState.stateOld }}</td>
                <td>{{ actionState.stateNew }}</td>
                <td>{{ actionState.changeAt | date('d-m-Y') }}</td>
                <td>{{ actionState.content }}</td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}